<!DOCTYPE html>
<html>
<head>
<title>Hello, Adventure</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
<link rel="stylesheet" href="./style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>
<body>

<!-- Links (sit on top) -->
<div class="w3-top">
    <div class="w3-row w3-black w3-container w3-center w3-padding-16 w3-large">
        <a href="#" class="w3-button w3-inline w3-black w3-padding w3-margin-right">HOME</a>
        <a href="#about" class="w3-button w3-inline w3-black w3-padding w3-margin-left">ABOUT</a>
    </div>
</div>

<!-- Header with image -->
<header class="bgimg w3-display-container w3-grayscale-min" id="home">
  <div class="w3-display-bottomleft w3-center w3-padding-large w3-hide-small">
  </div>
  <div class="w3-display-middle w3-center">
    <span class="w3-text-white" style="font-size:90px">HELLO<br>ADVENTURE</span>
  </div>
  <div class="w3-display-bottomright w3-center w3-padding-large">
  </div>
</header>

<!-- Add a background color and large text to the whole page -->
<div class="w3-sand w3-grayscale w3-large">

<!-- Menu Container -->
<div class="w3-display-container w3-center" id="menu">
    <div class="w3-content d-flex justify-center w3-padding" style="max-width:60%;">
      <div class="d-flex-col justify-center align-center" style="width: 60%; padding: 0; margin: 0;">
        <h5 class="w3-center w3-padding-16 w3-xlarge"><span class="w3-tag w3-wide w3-padding">JOIN THE ADVENTURE</span></h5>
        <p id="status" class="w3-padding w3-red w3-center" hidden>USERNAME OR PASSWORD INCORRECT</p>
        <form id="login" class="separate-children" style="width: 100%;" onsubmit="return false">
            <label for="username">USERNAME</label><br>
            <input style="min-width:45%" type="text" id="username" name="username" required><br>
            <label for="password">PASSWORD</label><br>
            <input style="min-width:45%" type="password" id="password" name="password" required><br>
            <button style="min-width: 20%;" type="submit">SIGN IN</button>
            <a class="w3-white w3-border w3-hover-gray w3-hover-text-white w3-padding" href="./registration.html">Register</a>
        </form>
      </div>
    </div>
</div>

<!-- About Container -->
<div class="w3-container" id="about">
  <div class="w3-content" style="max-width:50%">
    <h5 class="w3-center w3-padding-64"><span class="w3-tag w3-wide">ABOUT HELLO ADVENTURE</span></h5>
    <p>The Cafe was founded in blabla by Mr. Smith in lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    <p>In addition to our full espresso and brew bar menu, we serve fresh made-to-order breakfast and lunch sandwiches, as well as a selection of sides and salads and other good stuff.</p>
    <div class="w3-panel w3-leftbar w3-light-grey">
      <p><i>"Use products from nature for what it's worth - but never too early, nor too late." Fresh is the new sweet.</i></p>
      <p>Chef, Coffeeist and Owner: Liam Brown</p>
    </div>
    <img style="width:100%;max-width:1000px" class="w3-margin-top">
    <p><strong>Opening hours:</strong> everyday from 6am to 5pm.</p>
    <p><strong>Address:</strong> 15 Adr street, 5015, NY</p>
  </div>
</div>

<!-- End page content -->
</div>

<!-- Footer -->
<footer class="w3-center w3-light-grey w3-padding-16 w3-large">
  <p>Hello, Adventure</p>
  <p>2023</p>
</footer>
</body>
</html>

<script>
  $(document).ready(() => {

    var url = window.location.href
    console.log(url.indexOf("?error=true"))
    if(url.indexOf("?error=true") != -1)
        $("#status").show()

    $("#login").on('submit', async function() {
        // Get all the forms elements and their values in one step
        let $username = $(this).find('input[name="username"]')
        let $password = $(this).find('input[name="password"]')
        
        var inputValues = {
            "username":$username.val(),
            "password":$password.val(),
        } 

        $username.val("")
        $password.val("")

        await fetch('http://127.0.0.1:5000/verifyLogin', {
                method: "POST",
                headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
                },
                body: JSON.stringify(inputValues)
        })
        .then(response => {
            console.log(response.status)
            if(response.status === 409) {
                window.location = 'http://127.0.0.1:5500/?error=true'
            } else {
                window.location = 'http://127.0.0.1:5500'
            }
        })
    })
  })
</script>